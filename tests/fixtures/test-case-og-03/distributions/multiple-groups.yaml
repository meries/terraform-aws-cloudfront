enabled: true
comment: "Multiple Origin Groups - Test Case OG-03"
create_dns_records: false

origins:
  - id: primary-s3
    domain_name: static-primary.s3.us-east-1.amazonaws.com
    type: s3

  - id: secondary-s3
    domain_name: static-backup.s3.us-west-2.amazonaws.com
    type: s3

  - id: primary-api
    domain_name: api-primary.example.com
    type: custom
    protocol_policy: https-only

  - id: secondary-api
    domain_name: api-backup.example.com
    type: custom
    protocol_policy: https-only

origin_groups:
  - id: static-ha
    failover_criteria:
      status_codes: [500, 502, 503, 504]
    members:
      - origin_id: primary-s3
      - origin_id: secondary-s3

  - id: api-ha
    failover_criteria:
      status_codes: [500, 502, 503, 504]
    members:
      - origin_id: primary-api
      - origin_id: secondary-api

default_behavior:
  target_origin_id: static-ha
  viewer_protocol_policy: "redirect-to-https"
  allowed_methods: [GET, HEAD]
  cached_methods: [GET, HEAD]

behaviors:
  - path_pattern: "/api/*"
    target_origin_id: api-ha
    viewer_protocol_policy: "redirect-to-https"
    allowed_methods: [GET, HEAD, OPTIONS, PUT, POST, PATCH, DELETE]
    cached_methods: [GET, HEAD]
